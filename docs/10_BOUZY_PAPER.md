### Bouzy 2015: An Experimental Investigation on the Pancake Problem

**Источник:** Bruno Bouzy, *An Experimental Investigation on the Pancake Problem*, CGW 2015 (файл `baseline/bouzy-pancake-cgw2015.pdf`).

---

### Что за задача

- Рассматривается классическая **pancake sorting** / **sorting by prefix reversals (SBPR)**:
  - перестановка \(\pi\) длины \(N\);
  - ход: разворот префикса длины \(i\) (аналог нашего хода `Rk`);
  - цель: минимизировать число ходов (reversal distance);
  - в расширении рассматриваются также **SBR** (sorting by reversals) и **burnt pancakes** (подписи/знаки).
- Вводятся общие определения:
  - расширенная перестановка `[0, π(1), ..., π(N), N+1]`;
  - **breakpoint** между позициями, где \(|π(i) - π(i-1)| ≠ 1\);
  - число breakpoints `#bp` — нижняя оценка числа ходов и простая **admissible heuristic** для поиска.

---

### Основной вклад статьи

- Цель: **экспериментальное улучшение аппроксимации** для диаметра задачи вращений.
  - До работы Bouzy: лучшая теоретическая 2-аппроксимация (алгоритм Fischer–Ginzinger, FG), дающая ~1.22 экспериментальный коэффициент на стэках длины < 70.
  - Bouzy показывает, что **Monte-Carlo Search (MCS)** с вложенными уровнями и доменно-зависимыми симуляциями даёт:
    - **~1.04 экспериментальную аппроксимацию** (существенный прорыв);
    - на больших стэках (до 512) — R-аппроксимацию порядка 1.20 при малой вложенности.
- Сравниваются два планировщика:
  - **IDDFS** (Iterative Deepening DFS) с эвристикой по breakpoints;
  - **MCS** (nested Monte-Carlo / Monte-Carlo Search) c разными уровнями вложенности.
  - Вывод: **MCS на уровнях 3–4** даёт гораздо лучшее качество при разумной цене по времени.

---

### Доменно-зависимые алгоритмы / симуляторы

Bouzy определяет и использует в MCS несколько специализированных алгоритмов:

- **EffSort (Efficient Sort)** — эффективный жадный сортировщик по breakpoints.
- **AltSort (Alternate Sort)** — альтернативный жадный алгоритм.
- **BREF (Basic Random Efficient algorithm)** — стохастический вариант, комбинирующий эффективные шаги и случайные.
- **FDEffSort (Fixed-Depth Efficient Sort)** — EffSort с фиксированной глубиной (ограничение по числу ходов / уровню).
- **FDAltSort (Fixed-Depth Alternate Sort)** — AltSort с фиксированной глубиной.
- **FG (Fischer–Ginzinger)** — классический 2-аппроксимационный алгоритм (ре-используется как один из baseline).

Эти алгоритмы используются:

- как **rollout-политики** (симуляторы) в MCS;
- как компоненты для построения гибридных решений (например, первый этап — FG/EffSort, затем MCS-доулучшение).

---

### Monte-Carlo Search (MCS) в статье

- Используется вариация **nested MCS**:
  - на каждом уровне выполняются многократные симуляции по доменно-зависимым алгоритмам (EffSort/BREF/FD*);
  - выбираются ходы, ведущие к лучшим средним/минимальным результатам по длине решения.
- Важные свойства:
  - при фиксированном уровне вложенности и фиксированном числе симуляций **MCS остаётся полиномиальным** по времени;
  - позволяет масштабироваться до больших стэков (до N=512) лучше, чем чистый IDDFS.

---

### Связь с текущим проектом

- **Общие элементы:**
  - в нашем коде уже есть эвристики на основе **breakpoints** и **gap_h** (`src/heuristics/h_functions.py`);
  - аналог FG и жадного baseline реализован в `src/core/baseline.py` и `src/heuristics/beam.py`.
- **Чего нет напрямую:**
  - реализаций EffSort, AltSort, BREF, FDEffSort, FDAltSort как отдельных алгоритмов;
  - явного nested MCS поверх этих симуляторов.
- **Как можно использовать идеи Bouzy:**
  - рассматривать MCS/rollout-стратегии как **мост между эвристическим поиском и RL**:
    - вместо hand-crafted EffSort/AltSort можно использовать наши notebook-солверы или RL-политику как rollout;
    - или добавить лёгкий MCS-слой, который поверх notebook/baseline/beam пробует локальные изменения.
  - использовать **экспериментальный подход Bouzy** (сравнение алгоритмов на больших N, измерение R-аппроксимации) как шаблон для наших экспериментов (`run_grid`, `run_rl`, `04_RESULTS.md`).

---

### Где это учитывается в нашем проекте

- В `docs/01_PROJECT_OVERVIEW.md` и `docs/03_HYPOTHESES.md` Bouzy можно ссылаться как на:
  - источник **идеологии MCS + доменно-зависимые симуляторы**;
  - пример экспериментального подхода к оценке диаметра и аппроксимаций.
- В будущих гипотезах (новые H_MCS_*) можно явно опираться на:
  - использование notebook/beam/RL как симуляторов внутри MCS;
  - измерение R-аппроксимации и сравнений с baseline по методике статьи.

