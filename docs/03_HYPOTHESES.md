# Гипотезы и план скрещиваний

Одна тема — одна гипотеза/направление. Результаты фиксировать в `04_RESULTS.md`.

---

## H1: Улучшение без скрещивания

**Гипотеза:** Рефакторинг, модульность, тесты и единый контракт (формат перестановок/ходов) сами по себе повысят поддерживаемость и надёжность без изменения алгоритмов.

**Действия:** Разбить код на модули, добавить unit- и интеграционные тесты, убрать дублирование (например, два разных `parse_permutation`), унифицировать представление ходов (list[int] vs list[str] "Rk").

---

## H2: Копия блокнота + Beam search

**Гипотеза:** Использование beam search (из 91584) как пост-обработки для решений, полученных солверами блокнота (например v3_1, v3_5), даст более короткие решения при сохранении корректности.

**Действия:**
- Взять baseline_moves_fn = солвер из блокнота (возвращающий list[int] ходов).
- Вызывать `beam_improve_or_baseline_h` с этим baseline.
- Замерить: доля улучшений, средний gain, время; сравнить с baseline = классический pancake sort.

---

## H3: Копия блокнота + pancake_91584 (без ML)

**Гипотеза:** Объединение утилит и пайплайнов из обоих файлов (общий парсинг, форматы, оценка, best_solution, run_grid) позволит комбинировать солверы блокнота и beam search 91584 в одном конвейере и упростит A/B сравнения.

**Действия:**
- Единый модуль core (parse, apply_moves, moves_to_str, moves_len).
- Солверы блокнота и beam в одном интерфейсе (функция perm -> list[int]).
- Общий слой submission (best_solution, evaluate vs baseline, сохранение CSV).

---

## H4: Блокнот + Beam search + pancake_91584 (включая ML)

**Гипотеза:** Трёхуровневая стратегия даст лучший результат: (1) быстрый солвер блокнота или классический baseline; (2) улучшение beam search с эвристикой; (3) опционально улучшение beam+ML для подмножества задач (например, большие n). Все компоненты в одном репозитории с общими тестами и метриками.

**Действия:**
- Реализовать стратегию выбора: по n или по времени выбирать цепочку [notebook/baseline] -> [beam] -> [optional ML-beam].
- Сравнить суммарную длину решений и время против только beam и только блокнота.
- Фиксировать конфигурации (beam_width, depth, пороги блокнота) в конфиге и в `04_RESULTS.md`.

---

*По мере проведения экспериментов добавлять сюда уточнения гипотез и ссылки на 04_RESULTS.md.*
